{"version":3,"file":"import-resolver.min.js","sources":["../src/settings.js","../src/exists.js","../src/core.js","../src/resolver.js","../src/main.js"],"sourcesContent":["import fs from 'fs';\nimport path from 'path';\nimport _ from 'lodash/fp';\n\nexport const defaultValidExtensions = ['.js', '.mjs', '.json', '.jsx'];\n\nlet settings = {};\nlet dependencies = {};\n\nconst moduleResolverSettings = _.flow(\n  _.get('plugins'),\n  _.filter(_.isArray),\n  _.find(p => _.first(p) === 'module-resolver'),\n  _.nth(1),\n  _.defaults({\n    root: [],\n    alias: [],\n    externals: [],\n  }),\n);\n\nconst resolverSettings = _.flow(\n  _.get('plugins'),\n  _.filter(_.isArray),\n  _.find(p => _.first(p) === 'resolver'),\n  _.nth(1),\n  _.defaults({\n    resolveDirs: [],\n  }),\n  r => ({ root: r.resolveDirs, alias: {}, externals: [] }),\n);\n\nexport const clear = () => {\n  settings = {};\n  dependencies = {};\n};\n\nexport const readWebpackConfig = (rootDir = '.', opts) => {\n  let webpackConfig;\n  try {\n    // eslint-disable-next-line global-require, import/no-dynamic-require\n    webpackConfig = require(path.join(rootDir, 'webpack.config.js'));\n  } catch (err) {\n    return { root: [], alias: {}, externals: [] };\n  }\n\n  const webpackConfigIndex = _.get('webpackConfigIndex')(opts) || 0;\n\n  if (_.isArray(webpackConfig)) {\n    webpackConfig = _.nth(webpackConfigIndex)(webpackConfig) || {};\n  } else if (!_.isPlainObject(webpackConfig)) {\n    return { root: [], alias: {}, externals: [] };\n  }\n\n  let externals = _.get('externals')(webpackConfig) || [];\n\n  if (_.isArray(externals)) {\n    externals = _.filter(e => _.isString(e) || _.isRegExp(e))(externals);\n  }\n\n  if (_.isPlainObject(externals)) {\n    externals = _.keys(externals);\n  }\n\n  return {\n    root: _.get('resolve.modules')(webpackConfig) || [],\n    alias: _.get('resolve.alias')(webpackConfig) || [],\n    externals,\n  };\n};\n\nexport const parseJson = (rootDir, file) => {\n  try {\n    return JSON.parse(fs.readFileSync(`${rootDir}/${file}`, {\n      encoding: 'utf8',\n    }).toString());\n  } catch (err) {\n    return {};\n  }\n};\n\nexport const readSettings = (rootDir = '.', opts = {}) => {\n  if (_.isEmpty(settings)) {\n    const babelRC = parseJson(rootDir, '.babelrc');\n\n    const mrs = moduleResolverSettings(babelRC);\n    const ms = resolverSettings(babelRC);\n    const wb = readWebpackConfig(rootDir, opts);\n\n    settings = _.fromPairs([\n      ['root', _.flow(\n        _.flatMap(_.get('root')),\n        _.uniq,\n      )([ms, mrs, wb])],\n      ['alias', _.flow(\n        _.map(_.get('alias')),\n        _.flatMap(_.toPairs),\n        _.uniq,\n        _.fromPairs,\n      )([ms, mrs, wb])],\n      ['externals', _.get('externals')(wb)],\n    ]);\n  }\n\n  return _.defaults({\n    root: [],\n    alias: [],\n    externals: [],\n  })(settings);\n};\n\nexport const readDependencies = (rootDir = '.') => {\n  if (_.isEmpty(dependencies)) {\n    const pkg = parseJson(rootDir, 'package.json');\n\n    dependencies = _.flow(\n      p => _.flatMap(_.identity)(_.map(d => _.keys(_.get(d)(p)))([\n        'dependencies',\n        'peerDependencies',\n        'devDependencies',\n      ])),\n      _.uniq,\n      _.compact,\n    )(pkg);\n  }\n\n  return dependencies;\n};\n","import _ from 'lodash/fp';\nimport fs from 'fs';\nimport path from 'path';\n\nimport { defaultValidExtensions, parseJson } from 'settings';\n\nexport const fileExists = (p, validExtensions = defaultValidExtensions) => {\n  const paths = _.concat(\n    p,\n    _.map(e => `${p}${e}`)(validExtensions),\n  );\n\n  return _.find((f) => {\n    try {\n      return fs.lstatSync(f).isFile();\n    } catch (err) {\n      return false;\n    }\n  })(paths);\n};\n\nexport const dirExists = (p) => {\n  try {\n    return fs.lstatSync(p).isDirectory();\n  } catch (e) {\n    return false;\n  }\n};\n\nconst exists = (mod, validExtensions) => _.reduce((result, lookup) => {\n  if (!result) {\n    return lookup();\n  }\n\n  return result;\n})(false)([\n  () => fileExists(mod, validExtensions),\n  () => fileExists(path.join(mod, 'index'), validExtensions),\n  () => {\n    if (fileExists(path.join(mod, 'package.json'))) {\n      const pkg = parseJson(mod, 'package.json');\n\n      const main = _.get('jsnext:main')(pkg) || _.get('main')(pkg) || null;\n      if (main) {\n        return fileExists(path.join(mod, main), validExtensions);\n      }\n    }\n\n    return false;\n  },\n]);\n\nexport default exists;\n","\nimport _ from 'lodash/fp';\n\nexport const coreModules = [\n  'assert', 'async_hooks', 'buffer_ieee754',\n  'buffer', 'child_process', 'cluster', 'console',\n  'constants', 'crypto', '_debugger', 'dgram',\n  'dns', 'domain', 'events', 'freelist', 'fs',\n  '_http_agent', '_http_client', '_http_common', '_http_incoming',\n  '_http_outgoing', '_http_server', 'http', 'http2', 'https',\n  'inspector', '_linklist', 'module', 'net',\n  'node-inspect/lib/_inspect',\n  'node-inspect/lib/internal/inspect_client',\n  'node-inspect/lib/internal/inspect_repl',\n  'os', 'path', 'perf_hooks', 'process', 'punycode', 'querystring',\n  'readline', 'repl', 'smalloc',\n  '_stream_duplex', '_stream_transform', '_stream_wrap', '_stream_passthrough', '_stream_readable', '_stream_writable',\n  'stream', 'string_decoder',\n  'sys', 'timers',\n  '_tls_common', '_tls_legacy', '_tls_wrap',\n  'tls', 'tty', 'url', 'util',\n  'v8/tools/codemap', 'v8/tools/consarray', 'v8/tools/csvparser', 'v8/tools/logreader', 'v8/tools/profile_view', 'v8/tools/splaytree',\n  'v8', 'vm', 'zlib',\n];\n\nexport default function isCore(mod) {\n  return _.includes(mod)(coreModules);\n}\n","// because tleunen/babel-plugin-module-resolver is broken\n// and building an import resolver is not a rocket science\n\nimport path from 'path';\nimport _ from 'lodash/fp';\n\nimport exists from 'exists';\nimport isCore from 'core';\n\nimport { readSettings, readDependencies, defaultValidExtensions } from 'settings';\n\nconst replaceAliases = (source, aliases) => _.reduce((r, v) => {\n  const [alias, mod] = v;\n\n  return _.flow(\n    _.replace(new RegExp(`^${alias}`), mod),\n    _.replace(new RegExp(`${alias}$`), mod),\n  )(r);\n})(source)(_.entries(aliases));\n\nconst lookupRelative = (source, file, validExtensions) => {\n  const rel = _.replace(/$.\\//, '')(source);\n  const curDirMod = path.join(path.dirname(file), rel);\n  return exists(curDirMod, validExtensions);\n};\n\nconst lookupExternals = (source, externals) => !!_.find(e =>\n  (_.isString(e) ? _.startsWith(e)(source) : source.match(e)))(externals);\n\nconst lookupRoot = (source, root, roots, validExtensions) => {\n  const rootPaths = _.map(r => path.join(root, r, source))(roots);\n\n  return _.flow(\n    _.map(p => exists(p, validExtensions)),\n    _.compact,\n    _.nth(0),\n  )(rootPaths);\n};\n\nconst lookupDeps = (source, root, deps, validExtensions) => {\n  if (_.find(d => _.startsWith(d)(source))(deps)) {\n    return exists(path.join(root, 'node_modules', source), validExtensions);\n  }\n\n  return false;\n};\n\nconst resolve = (source, file, options = {}) => {\n  if (_.overSome([_.isEmpty, s => !s])(source)) {\n    return { found: false };\n  }\n\n  if (isCore(source)) {\n    return { found: true };\n  }\n\n  const { root, validExtensions } = _.flow(\n    _.defaults({\n      root: process.cwd(),\n      extensions: defaultValidExtensions,\n    }),\n    s => ({\n      root: _.get('root')(s),\n      validExtensions: _.get('extensions')(s),\n    }),\n  )(options);\n\n  const settings = readSettings(root, options);\n  const aliasedSource = replaceAliases(source, settings.alias);\n  const deps = readDependencies(root);\n\n  const filePath = _.reduce((result, lookup) => {\n    if (!result) {\n      return lookup();\n    }\n\n    return result;\n  })(false)([\n    () => lookupRelative(aliasedSource, file, validExtensions),\n    () => lookupExternals(aliasedSource, settings.externals),\n    () => lookupRoot(aliasedSource, root, settings.root, validExtensions),\n    () => lookupDeps(aliasedSource, root, deps, validExtensions),\n  ]);\n\n  return { found: _.isString(filePath) || filePath === true, path: filePath };\n};\n\nexport default resolve;\n","import resolve from 'resolver';\n\nexport default {\n  interfaceVersion: 2,\n  resolve,\n};\n"],"names":["defaultValidExtensions","settings","dependencies","moduleResolverSettings","_","flow","get","filter","isArray","find","p","first","nth","defaults","root","alias","externals","resolverSettings","resolveDirs","r","readWebpackConfig","webpackConfig","rootDir","opts","require","path","join","err","webpackConfigIndex","isPlainObject","e","isString","isRegExp","keys","parseJson","file","JSON","parse","fs","readFileSync","encoding","toString","readSettings","isEmpty","babelRC","mrs","ms","wb","fromPairs","flatMap","uniq","map","toPairs","readDependencies","pkg","identity","d","compact","fileExists","validExtensions","paths","concat","f","lstatSync","isFile","exists","mod","reduce","result","lookup","main","coreModules","isCore","includes","replaceAliases","source","aliases","v","replace","RegExp","entries","lookupRelative","rel","curDirMod","dirname","lookupExternals","startsWith","match","lookupRoot","roots","rootPaths","lookupDeps","deps","resolve","options","overSome","s","found","process","cwd","extensions","aliasedSource","filePath","interfaceVersion"],"mappings":"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"}