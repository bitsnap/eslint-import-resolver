{"version":3,"file":"import-resolver.min.js","sources":["../src/settings.js","../src/exists.js","../src/core.js","../src/resolver.js","../src/main.js"],"sourcesContent":["import fs from 'fs';\nimport path from 'path';\nimport _ from 'lodash/fp';\n\nexport const defaultValidExtensions = ['.js', '.mjs', '.json', '.jsx'];\n\nlet settings = {};\nlet dependencies = {};\n\nconst moduleResolverSettings = _.flow(\n  _.get('plugins'),\n  _.filter(_.isArray),\n  _.find(p => _.first(p) === 'module-resolver'),\n  _.nth(1),\n  _.defaults({\n    root: [],\n    alias: [],\n    externals: [],\n  }),\n);\n\nconst resolverSettings = _.flow(\n  _.get('plugins'),\n  _.filter(_.isArray),\n  _.find(p => _.first(p) === 'resolver'),\n  _.nth(1),\n  _.defaults({\n    resolveDirs: [],\n  }),\n  r => ({ root: r.resolveDirs, alias: {}, externals: [] }),\n);\n\nexport const clear = () => {\n  settings = {};\n  dependencies = {};\n};\n\nexport const readWebpackConfig = (rootDir = '.', opts) => {\n  let webpackConfig;\n  try {\n    // eslint-disable-next-line global-require, import/no-dynamic-require\n    webpackConfig = require(path.join(rootDir, 'webpack.config.js'));\n  } catch (err) {\n    return { root: [], alias: {}, externals: [] };\n  }\n\n  const webpackConfigIndex = _.get('webpackConfigIndex')(opts) || 0;\n\n  if (_.isArray(webpackConfig)) {\n    webpackConfig = _.nth(webpackConfigIndex)(webpackConfig) || {};\n  } else if (!_.isPlainObject(webpackConfig)) {\n    return { root: [], alias: {}, externals: [] };\n  }\n\n  let externals = _.get('externals')(webpackConfig) || [];\n\n  if (_.isArray(externals)) {\n    externals = _.filter(e => _.isString(e) || _.isRegExp(e))(externals);\n  }\n\n  if (_.isPlainObject(externals)) {\n    externals = _.keys(externals);\n  }\n\n  return {\n    root: _.get('resolve.modules')(webpackConfig) || [],\n    alias: _.get('resolve.alias')(webpackConfig) || [],\n    externals,\n  };\n};\n\nconst parseJson = (rootDir, file) => {\n  try {\n    return JSON.parse(fs.readFileSync(`${rootDir}/${file}`, {\n      encoding: 'utf8',\n    }).toString());\n  } catch (err) {\n    return {};\n  }\n};\n\nexport const readSettings = (rootDir = '.', opts = {}) => {\n  if (_.isEmpty(settings)) {\n    const babelRC = parseJson(rootDir, '.babelrc');\n\n    const mrs = moduleResolverSettings(babelRC);\n    const ms = resolverSettings(babelRC);\n    const wb = readWebpackConfig(rootDir, opts);\n\n    settings = _.fromPairs([\n      ['root', _.flow(\n        _.flatMap(_.get('root')),\n        _.uniq,\n      )([ms, mrs, wb])],\n      ['alias', _.flow(\n        _.map(_.get('alias')),\n        _.flatMap(_.toPairs),\n        _.uniq,\n        _.fromPairs,\n      )([ms, mrs, wb])],\n      ['externals', _.get('externals')(wb)],\n    ]);\n  }\n\n  return _.defaults({\n    root: [],\n    alias: [],\n    externals: [],\n  })(settings);\n};\n\nexport const readDependencies = (rootDir = '.') => {\n  if (_.isEmpty(dependencies)) {\n    const p = parseJson(rootDir, 'package.json');\n\n    dependencies = _.flow(\n      pkg => _.flatMap(_.identity)(_.map(d => _.keys(_.get(d)(pkg)))([\n        'dependencies',\n        'peerDependencies',\n        'devDependencies',\n      ])),\n      _.uniq,\n      _.compact,\n    )(p);\n  }\n\n  return dependencies;\n};\n","import _ from 'lodash/fp';\nimport fs from 'fs';\nimport path from 'path';\n\nimport { defaultValidExtensions } from 'settings';\n\nexport const fileExists = (p, validExtensions = defaultValidExtensions) => {\n  const paths = _.concat(\n    p,\n    _.map(e => `${p}${e}`)(validExtensions),\n  );\n\n  return _.find((f) => {\n    try {\n      return fs.lstatSync(f).isFile();\n    } catch (err) {\n      return false;\n    }\n  })(paths);\n};\n\nexport const dirExists = (p) => {\n  try {\n    return fs.lstatSync(p).isDirectory();\n  } catch (e) {\n    return false;\n  }\n};\n\nconst exists = (mod, validExtensions) => {\n  let f = fileExists(mod, validExtensions);\n  if (f) {\n    return f;\n  }\n\n  if (dirExists(mod)) {\n    f = fileExists(path.join(mod, 'index'), validExtensions);\n    if (f) {\n      return f;\n    }\n\n    if (fileExists(path.join(mod, 'package.json'))) {\n      const p = JSON.parse(fs.readFileSync(`${mod}/package.json`, {\n        encoding: 'utf8',\n      }).toString());\n\n      const main = _.get('jsnext:main')(p) || _.get('main')(p);\n      f = path.join(mod, main);\n      if (fileExists(f, validExtensions)) {\n        return f;\n      }\n    }\n  }\n\n  return false;\n};\n\nexport default exists;\n","\nimport _ from 'lodash/fp';\n\nexport const coreModules = [\n  'assert', 'async_hooks', 'buffer_ieee754',\n  'buffer', 'child_process', 'cluster', 'console',\n  'constants', 'crypto', '_debugger', 'dgram',\n  'dns', 'domain', 'events', 'freelist', 'fs',\n  '_http_agent', '_http_client', '_http_common', '_http_incoming',\n  '_http_outgoing', '_http_server', 'http', 'http2', 'https',\n  'inspector', '_linklist', 'module', 'net',\n  'node-inspect/lib/_inspect',\n  'node-inspect/lib/internal/inspect_client',\n  'node-inspect/lib/internal/inspect_repl',\n  'os', 'path', 'perf_hooks', 'process', 'punycode', 'querystring',\n  'readline', 'repl', 'smalloc',\n  '_stream_duplex', '_stream_transform', '_stream_wrap', '_stream_passthrough', '_stream_readable', '_stream_writable',\n  'stream', 'string_decoder',\n  'sys', 'timers',\n  '_tls_common', '_tls_legacy', '_tls_wrap',\n  'tls', 'tty', 'url', 'util',\n  'v8/tools/codemap', 'v8/tools/consarray', 'v8/tools/csvparser', 'v8/tools/logreader', 'v8/tools/profile_view', 'v8/tools/splaytree',\n  'v8', 'vm', 'zlib',\n];\n\nexport default function isCore(mod) {\n  return _.includes(mod)(coreModules);\n}\n","// because tleunen/babel-plugin-module-resolver is broken\n// and building an import resolver is not a rocket science\n\nimport path from 'path';\nimport _ from 'lodash/fp';\n\nimport exists from 'exists';\nimport isCore from 'core';\n\nimport { readSettings, readDependencies, defaultValidExtensions } from 'settings';\n\nconst replaceAliases = (source, aliases) => _.reduce((r, v) => {\n  const [alias, mod] = v;\n\n  return _.flow(\n    _.replace(new RegExp(`^${alias}`), mod),\n    _.replace(new RegExp(`${alias}$`), mod),\n  )(r);\n})(source)(_.entries(aliases));\n\nconst lookupRelative = (source, file, validExtensions) => {\n  const rel = _.replace(/$.\\//, '')(source);\n  const curDirMod = path.join(path.dirname(file), rel);\n  return exists(curDirMod, validExtensions);\n};\n\nconst lookupExternals = (source, externals) => !!_.find(e =>\n  (_.isString(e) ? _.startsWith(e)(source) : source.match(e)))(externals);\n\nconst lookupRoot = (source, root, roots, validExtensions) => {\n  const rootPaths = _.map(r => path.join(root, r, source))(roots);\n\n  return _.flow(\n    _.map(p => exists(p, validExtensions)),\n    _.compact,\n    _.nth(0),\n  )(rootPaths);\n};\n\nconst lookupDeps = (source, root, deps, validExtensions) => {\n  if (_.find(d => _.startsWith(d)(source))(deps)) {\n    return exists(path.join(root, 'node_modules', source), validExtensions);\n  }\n\n  return false;\n};\n\nconst resolve = (source, file, options = {}) => {\n  if (_.overSome([_.isEmpty, s => !s])(source)) {\n    return { found: false };\n  }\n\n  if (isCore(source)) {\n    return { found: true };\n  }\n\n  const { root, validExtensions } = _.flow(\n    _.defaults({\n      root: process.cwd(),\n      extensions: defaultValidExtensions,\n    }),\n    s => ({\n      root: _.get('root')(s),\n      validExtensions: _.get('extensions')(s),\n    }),\n  )(options);\n\n  const settings = readSettings(root, options);\n  const aliasedSource = replaceAliases(source, settings.alias);\n  const deps = readDependencies(root);\n\n  const filePath = _.reduce((result, lookup) => {\n    if (!result) {\n      return lookup();\n    }\n\n    return result;\n  })(false)([\n    () => lookupRelative(aliasedSource, file, validExtensions),\n    () => lookupExternals(aliasedSource, settings.externals),\n    () => lookupRoot(aliasedSource, root, settings.root, validExtensions),\n    () => lookupDeps(aliasedSource, root, deps, validExtensions),\n  ]);\n\n  return { found: _.isString(filePath) || filePath === true, path: filePath };\n};\n\nexport default resolve;\n","import resolve from 'resolver';\n\nexport default {\n  interfaceVersion: 2,\n  resolve,\n};\n"],"names":["dependencies","moduleResolverSettings","_","flow","get","filter","isArray","find","first","p","nth","defaults","root","alias","externals","resolverSettings","resolveDirs","r","rootDir","opts","webpackConfig","require","path","join","err","webpackConfigIndex","isPlainObject","isString","e","isRegExp","keys","file","parse","fs","readFileSync","encoding","toString","isEmpty","settings","parseJson","mrs","babelRC","ms","wb","readWebpackConfig","fromPairs","flatMap","uniq","map","toPairs","identity","d","pkg","compact","defaultValidExtensions","paths","concat","validExtensions","f","lstatSync","isFile","isDirectory","mod","fileExists","dirExists","JSON","main","includes","coreModules","source","aliases","reduce","v","replace","entries","lookupRelative","curDirMod","dirname","rel","lookupExternals","startsWith","match","lookupRoot","roots","rootPaths","lookupDeps","deps","exists","resolve","overSome","s","found","isCore","process","cwd","extensions","options","readSettings","aliasedSource","replaceAliases","readDependencies","filePath","result","lookup","interfaceVersion"],"mappings":"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"}